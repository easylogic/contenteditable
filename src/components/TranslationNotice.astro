---
import { locales, type Locale, defaultLocale } from '../i18n/translations';

interface Props {
  locale: Locale;
  contentType?: 'case' | 'doc' | 'page';
  originalPath?: string;
}

const { locale, contentType = 'page', originalPath } = Astro.props;
const localeInfo = locales[locale];

// Translation notice messages for each locale
const notices: Record<Locale, { title: string; message: string; contribute: string; viewOriginal: string }> = {
  en: {
    title: '',
    message: '',
    contribute: '',
    viewOriginal: '',
  },
  ko: {
    title: '이 페이지는 아직 번역되지 않았습니다',
    message: '현재 영어 원문을 표시하고 있습니다. 번역에 기여해 주시면 감사하겠습니다.',
    contribute: '번역 기여하기',
    viewOriginal: '영어 원문 보기',
  },
  ja: {
    title: 'このページはまだ翻訳されていません',
    message: '現在、英語の原文を表示しています。翻訳への貢献をお待ちしております。',
    contribute: '翻訳に貢献する',
    viewOriginal: '英語原文を見る',
  },
  zh: {
    title: '此页面尚未翻译',
    message: '目前显示的是英文原文。欢迎您参与翻译工作。',
    contribute: '参与翻译',
    viewOriginal: '查看英文原文',
  },
  es: {
    title: 'Esta página aún no ha sido traducida',
    message: 'Actualmente se muestra el contenido original en inglés. Agradecemos su contribución a la traducción.',
    contribute: 'Contribuir a la traducción',
    viewOriginal: 'Ver original en inglés',
  },
  de: {
    title: 'Diese Seite wurde noch nicht übersetzt',
    message: 'Derzeit wird der englische Originalinhalt angezeigt. Wir freuen uns über Ihre Hilfe bei der Übersetzung.',
    contribute: 'Bei der Übersetzung helfen',
    viewOriginal: 'Englisches Original ansehen',
  },
  fr: {
    title: "Cette page n'a pas encore été traduite",
    message: "Le contenu original en anglais est actuellement affiché. Nous apprécierions votre contribution à la traduction.",
    contribute: 'Contribuer à la traduction',
    viewOriginal: "Voir l'original en anglais",
  },
};

const notice = notices[locale];

// Don't show for English (default locale)
const shouldShow = locale !== defaultLocale;
---

{shouldShow && (
  <div class="translation-notice">
    <div class="notice-icon">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
        <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM10 6v4M10 14h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <div class="notice-content">
      <p class="notice-title">{notice.title}</p>
      <p class="notice-message">{notice.message}</p>
    </div>
    <div class="notice-actions">
      <a
        href="https://github.com/barocss/contenteditable/issues/new?template=translation.md"
        target="_blank"
        rel="noopener"
        class="notice-btn contribute"
      >
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
        </svg>
        {notice.contribute}
      </a>
      {originalPath && (
        <a href={originalPath} class="notice-btn original">
          {notice.viewOriginal}
        </a>
      )}
    </div>
  </div>
)}

<style>
  .translation-notice {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem 1.25rem;
    background: linear-gradient(135deg, #fef3c7 0%, #fef9c3 100%);
    border: 1px solid #fcd34d;
    border-radius: 12px;
    margin-bottom: 1.5rem;
  }

  .notice-icon {
    flex-shrink: 0;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fbbf24;
    color: white;
    border-radius: 50%;
  }

  .notice-content {
    flex: 1;
    min-width: 0;
  }

  .notice-title {
    font-size: 0.95rem;
    font-weight: 600;
    color: #92400e;
    margin: 0 0 0.25rem;
  }

  .notice-message {
    font-size: 0.85rem;
    color: #a16207;
    margin: 0;
    line-height: 1.5;
  }

  .notice-actions {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    flex-shrink: 0;
  }

  .notice-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.4rem 0.75rem;
    font-size: 0.8rem;
    font-weight: 500;
    border-radius: 6px;
    text-decoration: none;
    white-space: nowrap;
    transition: all 0.15s;
  }

  .notice-btn.contribute {
    background: var(--text-primary);
    color: var(--bg-surface);
  }

  .notice-btn.contribute:hover {
    background: var(--text-secondary);
  }

  .notice-btn.original {
    background: white;
    color: #92400e;
    border: 1px solid #fcd34d;
  }

  .notice-btn.original:hover {
    background: #fffbeb;
    border-color: #f59e0b;
  }

  @media (max-width: 640px) {
    .translation-notice {
      flex-direction: column;
      align-items: stretch;
    }

    .notice-actions {
      flex-direction: row;
      flex-wrap: wrap;
      margin-top: 0.5rem;
    }
  }
</style>

